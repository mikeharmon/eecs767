---
- hosts: default
  sudo: yes
  tasks:

  - name: Ensure required APT packages are installed.
    action: apt name={{item}} state=present
    with_items:
      - git
      - python-pip
      - python-virtualenv

  - name: Create virtualenv for web app.
    pip: requirements=/vagrant/etc/requirements.txt virtualenv=/srv/venvs/webapp

  - name: Start hello world Flask app.
    shell: bash /vagrant/src/run.sh
